---
title: "MastodonのおひとりさまサーバをHostdonで立ててみた記録"
emoji: "🔖"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: [mastodon, hostdon, fediverse]
published: true
---

分散型ソーシャルネットワーク、Mastodon。Mastodon 含む Fediverse 上には、様々なサーバが存在しており、どれに参加してもそれぞれの良さがありそうです。

そんななか、自分の極めて個人的なことを連ねるために、自分専用のサーバを立ててみたいと思うようになりました…正直なところ手段が目的であって、立ててみたいから立てるんだ、という気持ちが 9 割です。

しかしながら、イチからサーバを立てるのは、色々と機能開発できて楽しそうな反面、あまりにもメンテナンスが大変そうです。時間がとれず、メンテされていないサーバをインターネット上に放置すると、周囲にも迷惑がかかりそうです。

このため、Mastodon のホスティングサービス[Hostdon](https://hostdon.jp/)を利用してみることにしました。いわゆるレンタルですね。ほかにもホスティングサービスはあるようなのですが、550 円/月からというお手頃価格が決め手になりました。
レンタルして 2 日ですが、いまのところ **満足しています** ！

## Hostdon で Mastodon ホスティングを受けるまでの流れ

アカウント登録をし、Mastodon インスタンスを申し込み、開通を待つ、という流れになります。
登録にはクレジットカードが必要です。

### アカウント登録

まずは[仮登録フォーム](https://account.hostdon.jp/regist.php)から、Hostdon にアカウントを登録します。

### Mastodon インスタンスを新規作成

アカウント登録できたら、コントロールパネルにアクセスし、Mastodon インスタンスの新規登録に進みます。

#### リージョン

東京かシンガポールを選べます。日本からアクセスする場合は東京を選ぶ方が動作が早くなるはずです。シンガポールの方が安く、今回はおひとりサーバでもあるのでシンガポールにしました。

#### プラン

一人で利用する場合はライトプランで充分とのことでライトを選択しました。

#### ディスク増量

画像や動画を盛り盛りアップロードする場合は増量した方がよいかも？いまのところテキスト中心の予定なので申し込みませんでした。

#### 全文検索機能

こちらもなしで申し込みました。
:::message
余談ですが、他の Mastodon サーバにある自分の投稿を全文検索したい場合は [notestock](https://notestock.osa-p.net/?lang=ja) というサービスを利用するとよさそうです。さらなる蛇足ですが、[Mastodon に検索機能が登場する？](https://ostatus.taiyolab.com/@taiyo/110857095107665551)という話もあるようです。
:::

#### ドメイン

独自ドメインを利用したい場合はこちらで記入します。既に取得済みのドメイン（自分の管理下にあるドメイン）を入力する必要があります。サブドメインを利用すると都合が良いようです。

![Hostdonインスタンスの申込画面](/images/hostdon-mastodon/hostdon-settings.png)

送信ボタンを押したら、申込完了！
目立たない Notice が画面の上方に出ます（最初は Notice に気づかず、送信できてないのかと勘違いしましたが、できていました）。

### Hostdon からのメールを待つ

独自ドメインで利用する場合、申込が完了してから 24 時間以内に DNS レコード変更のお願いメールが来るようです。
11 時に申し込み、メールが来たのは同日の 17 時ごろでした。

### ドメイン設定を変更する

メールの案内に従って、ドメイン設定を変更します。具体的には、利用したいサブドメインに所定の CNAME レコードを追加します。
追加後、念のため Hostdon に「レコードを追加しましたよ」の返信メールを送りました。

### インスタンス作成完了メールが届く

CNAME レコードを追加してから 10 分ほどで、インスタンスの作成が完了した旨のメールが届きました。さっそくアクセスしてみます。

## Mastodon にアカウント登録する

作成できたおひとりさま Mastodon ページにアクセスし、通常のユーザー作成手順を踏んで、まずは自分のアカウントを作成します。

## Hostdon の管理画面で自分のアカウントを管理者として登録する

Hostdon の管理画面にて、先ほど作成した自分のアカウントを管理者として登録します。
![Hostdon 管理者設定画面](/images/hostdon-mastodon/hostdon-admin-setting.png)

## Mastodon の設定を変更する

自分のアカウントで Mastodon にログインすると、管理者向けの設定が見えるようになっています。

できたてほやほやの Mastodon サーバはデフォルトで誰からの登録も受け付けるようになっていますので、これをおひとりさまサーバにすべく、Mastodon の管理画面にて、「アカウント登録を受け付けない」設定に変更します。

![Mastodon サーバ設定画面](/images/hostdon-mastodon/mastodon-server-settings.png)

ここまでできれば、おひとりさまサーバの完成です 👾 ✨
あとは適宜好きなようにゆるゆると設定を変更していけば OK です。

## 感想

とても手軽におひとりさまサーバを作れました。
シンガポールリージョンを選んだことが理由か、お手頃スペックを選んだことが理由かは分かりませんが、ふだん利用している[Hachyderm](https://hachyderm.io/)のサーバと比べると多少、動作が遅いかな？という気もしますが、許容範囲です。アップデートをお任せできるのは、とにかく安心、手間要らずですね。

ホスティングサービスを利用することにより、Mastodon の管理画面から設定する以上のことはできないため、おそらく Favicon を変えたりなどのカスタマイズはできないのかな？と思っています。
サービス案内によると、

> テーマ追加や文字数緩和などの多様なカスタマイズに対応します。詳しくはご連絡をお願いします。

とのことですので、個別に相談すればできるのかもしれませんね。

自分のサーバ／ドメインだと思うと、 **本当にどうでも良いことを超気軽に書けてよい** です。まさにマイクロブログの気分です。
どうでも良くなさそうなことは [@ayumisato@hachyderm.io](https://hachyderm.io/@ayumisato)で発信しています。

Zenn のプロフィールにも Mastodon アカウントを記入できるようになるといいですね。

※2024/07/13追記：Hostdonの値上げを機に、おひとりさまサーバを一回畳もうかな？と思っているため、サーバーとアカウント名の記載を削除しました。
